<div class="main-content">
  <div class="container-fluid">
      <div class="row">
          <div class="col-md-12">
              <div class="card">
                  <div class="card-header card-header-info">
                      <h4 class="card-title">PAYROLL DOWNLOAD</h4>
                  </div>
                  <form>
                      <div class="card-body">
                        <div class="row">
                          <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>Select Region</mat-label>
                              <mat-select name="regionCode" [(ngModel)]="regionCode" (selectionChange)="onSelectionChanged('Region',$event)">
                                <mat-option value="All">All</mat-option>
                                <mat-option  name="regionList" *ngFor="let regionObj of regionsArray;let i = index" [value]="regionObj.regionCode">
                                  {{ regionObj.regionName }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field>
                              <mat-label>Select State</mat-label>
                              <mat-select name="stateCode" [(ngModel)]="stateCode" (selectionChange)="onSelectionChanged('State',$event)">
                                <mat-option value="All">All</mat-option>
                                <mat-option  name="stateList" *ngFor="let stateObj of statesArray;let i = index" [value]="stateObj.stateCode">
                                  {{ stateObj.stateCode }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>Select Branch ID</mat-label>
                              <mat-select name="branchList" [(ngModel)]="branchId" (selectionChange)="onSelectionChanged('Branch',$event)">
                                <mat-option value="All">All</mat-option>
                                <mat-option  name="branchList" *ngFor="let branchObj of branchMasterArray;let i = index" [value]="branchObj.branchId">
                                  {{ branchObj.branchId }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>Select Pay Group</mat-label>
                              <mat-select name="payGroupName" [(ngModel)]="payGroup" (selectionChange)="onSelectionChanged('PayGroup',$event)">
                                <mat-option value="All">All</mat-option>
                                <mat-option *ngFor="let pgObj of payGroupArray;let i = index" 
                                [value]="pgObj.payGroupName">
                                  {{ pgObj.payGroupName }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field>
                              <mat-label>Week Number</mat-label>
                              <mat-select name="weekId" [(ngModel)]="weekId" (selectionChange)='weekNumberChange($event)'>
                                <mat-option *ngFor="let wObj of weekIdArray;let i = index" [value]="wObj.weekId">
                                    {{ wObj.weekId }}
                                </mat-option>
                              </mat-select>
                              
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field>
                              <mat-label>Payroll Date</mat-label>
                              <input type="text" matInput value="{{ payrollDate | date : 'MM/dd/yyyy'}}" readonly>
                            </mat-form-field>
                          </div>
                          
                        </div>
                        <div class="row">
                          <!-- <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>Total Branches</mat-label>
                              <input type="text" matInput value="{{totalBranches}}" readonly>
                            </mat-form-field>
                          </div> -->
                          <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>No. Of Incentives</mat-label>
                              <input type="text" matInput value="{{ totalPayrollApproved }}" readonly>
                            </mat-form-field>
                          </div>
                          <div class="col-md-2">
                            <mat-form-field >
                              <mat-label>Total Amount</mat-label>
                              <input type="text" matInput value="{{ totalAmount | currency}}" readonly>
                            </mat-form-field>
                          </div>
                          <div class="col-md-6">
                            <button mat-raised-button type="button" (click)="searchOnClick()" class="btn btn-info pull-left">
                                FILTER
                            </button>
                            <!-- <button mat-raised-button type="button" (click)="clearClick()" class="btn btn-danger pull-left">
                                SHOW ALL
                            </button> -->
                          </div>
                        </div>
                          <!-- <div class="row">
                            <div class="col-md-2">
                              <mat-form-field >
                                <mat-label>Select Branch Number</mat-label>
                                <mat-select [formControl]="branchList" multiple>
                                  <mat-option  name="branchList" *ngFor="let branchObj of branchMasterArray;let i = index" [value]="branchObj.branchId">
                                    {{ branchObj.branchId }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <div class="col-md-2">
                              <mat-form-field>
                                <mat-label>Choose a date</mat-label>
                                <input matInput [matDatepicker]="picker" [max]="today" name="weekDate" [(ngModel)]="weekDate" 
                                (dateInput)="addEvent('input', $event)" (dateChange)="addEvent('change', $event)">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                              </mat-form-field>
                            </div>
                            <div class="col-md-2">
                              <mat-form-field>
                                <mat-label>Week Number</mat-label>
                                <input type="text" matInput [(value)]="weekNumber" readonly>
                              </mat-form-field>
                            </div>
                            <div class="col-md-3">
                              <mat-form-field >
                                <mat-label>Select Pay Group</mat-label>
                                <mat-select [formControl]="payGroupName">
                                  <mat-option>Select Pay Group</mat-option>
                                  <mat-option  name="payGroupName" *ngFor="let pgObj of payGroupArray;let i = index" 
                                  [value]="pgObj.payGroupName">
                                    {{ pgObj.payGroupName }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div> -->
                          <div class="table-responsive">
                              <table class="table table-striped table-bordered table-sm row-border hover" *ngIf="payrollPendingDetails && payrollPendingDetails.length >0" datatable="ng" [dtOptions]="dtOptions">
                                  <thead>
                                      <tr>
                                          <th>Company Code</th>
                                          <th>Employee #</th>
                                          <th>Earn Code</th>
                                          <th>Blank Column</th>
                                          <th>Blank Column</th>
                                          <th>Earn Amt</th>
                                          <th>Employee Name</th>
                                          <th>Week Number</th>
                                          <th>Pay Group Code</th>
                                          <th>Location Code</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let group of payrollPendingDetails; let index = index">
                                          <td class="text-center">{{group.companyCode}}</td>
                                          <td class="text-center">{{group.employeeId}}</td>
                                          <td class="text-center">{{group.earnCode}}</td>
                                          <td>{{group.emptyColumn}}</td>
                                          <td>{{group.blanckColumn}}</td>
                                          <td class="text-right">{{group.incentiveAmount | currency}}</td>
                                          <td>{{group.employeeName}}</td>
                                          <td class="text-center">{{group.weekId}}</td>
                                          <td>{{group.payGroupCode}}</td>
                                          <td class="text-center">{{group.locationCode}}</td>
                                      </tr>
                                  </tbody>
                              </table>
                              <table class="table table-striped table-bordered table-sm row-border hover" *ngIf="payrollPendingDetails && payrollPendingDetails.length == 0" datatable="ng" [dtOptions]="dtOptions">
                                  <thead>
                                      <tr>
                                          <th>Company Code</th>
                                          <th>Employee #</th>
                                          <th>Earn Code</th>
                                          <th>Blank Column</th>
                                          <th>Blank Column</th>
                                          <th>Earn Amt</th>
                                          <th>Employee Name</th>
                                          <th>Week Number</th>
                                          <th>Pay Group Code</th>
                                          <th>Location Code</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let detailsObj of payrollPendingDetails; let index = index">
                                          <td class="text-center">
                                              No Data Available !!
                                          </td>
                                      </tr>
                                  </tbody>
                              </table>
                          </div>
                          <div class="clearfix"></div>
                          <!-- <button *ngIf="payrollPendingDetails.length > 0" (click)="downloadCSV()" mat-raised-button type="button"
                                  class="btn btn-info pull-right">
                              Export To CSV
                          </button> -->
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </div>
</div>
